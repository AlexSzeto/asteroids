<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="c)BE(,)W!E%Eq!XEWlE1">DIR</variable><variable id="2RTUbA0648V~wCsYq}HR">asteroids</variable></variables><block type="gameupdate" id="s#_A~t|]vH(yy_+W;[Yd" x="0" y="0"><statement name="HANDLER"><block type="typescript_statement" id="R,oJyQZQH-QQ2lJ6cgTu" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="me.update()" numlines="1"></mutation></block></statement></block><block type="pxt-on-start" id="84oH`VL;D_8X?kC{pXnv" x="80" y="240"><statement name="HANDLER"><block type="typescript_statement" id="(y*|,X%O_L`%=5%J_dKm" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="type NavData = {" line1="    dir: string," line2="    vx: number," line3="    vy: number," line4="    image: Image,    " line5="}" numlines="6"></mutation><next><block type="variables_set" id="9-hY;6px!kNO#XPu:Or:"><field name="VAR" id="c)BE(,)W!E%Eq!XEWlE1">DIR</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_create_with" id="TGA.z9,lI5)N/V!nwnW1" inline="false"><mutation items="8" horizontalafter="3"></mutation><value name="ADD0"><shadow type="text" id="zt$b,$ip^.WJ`FQML//v"><field name="TEXT">0,-1</field></shadow></value><value name="ADD1"><shadow type="text" id="qYwL{Rn+w9)cv.Plf`oR"><field name="TEXT">1,-1</field></shadow></value><value name="ADD2"><shadow type="text" id="|{x;FTy)Bxtj_hD=nw!T"><field name="TEXT">1,0</field></shadow></value><value name="ADD3"><shadow type="text" id="+5b4ouZ.he02S*E2rA_6"><field name="TEXT">1,1</field></shadow></value><value name="ADD4"><shadow type="text" id="eWPk9^89Q*LSp;MRak}*"><field name="TEXT">0,1</field></shadow></value><value name="ADD5"><shadow type="text" id="N!MTG+V5!R!%w5)W}Z:Y"><field name="TEXT">-1,1</field></shadow></value><value name="ADD6"><shadow type="text" id="Quqnc*_`w0~MEF/)MLFI"><field name="TEXT">-1,0</field></shadow></value><value name="ADD7"><shadow type="text" id="0+_ycNQrA@rF#npuOtFp"><field name="TEXT">-1,-1</field></shadow></value></block></value><next><block type="typescript_statement" id="/TK;:{JfQ94_Wa{=(Qny" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Ship {" line1="    padx: number = 0" line2="    pady: number = 0" line3="    face: NavData" line4="    fly: NavData" line5="    navData: NavData[]" line6="" line7="    constructor(" line8="        public sprite: Sprite        " line9="    ) {" line10="        sprite.setStayInScreen(true)" line11="    }" line12="" line13="    generateNavData(v: number, images: Image[]) {" line14="        const sv = v" line15="        const dv = sv / Math.sqrt(2)        " line16="" line17="        this.navData = [" line18="            { dir: '0,-1', vx: 0, vy: -sv, image: images[0] }," line19="            { dir: '1,-1', vx: dv, vy: -dv, image: images[1] }," line20="            { dir: '1,0', vx: sv, vy: 0, image: images[2] }," line21="            { dir: '1,1', vx: dv, vy: dv, image: images[3] }," line22="            { dir: '0,1', vx: 0, vy: sv, image: images[4] }," line23="            { dir: '-1,1', vx: -dv, vy: dv, image: images[5] }," line24="            { dir: '-1,0', vx: -dv, vy: 0, image: images[6] }," line25="            { dir: '-1,-1', vx: -dv, vy: -dv, image: images[7] }," line26="        ]" line27="" line28="        this.face = this.navData[0]" line29="    }" line30="" line31="    update() {" line32="        if (" line33="            controller.left.isPressed() ||" line34="            controller.right.isPressed() ||" line35="            controller.up.isPressed() ||" line36="            controller.down.isPressed()" line37="        ) {" line38="            if (controller.left.isPressed()) {" line39="                this.padx = -1" line40="            } else if (controller.right.isPressed()) {" line41="                this.padx = 1" line42="            } else {" line43="                this.padx = 0" line44="            }" line45="" line46="            if (controller.up.isPressed()) {" line47="                this.pady = -1" line48="            } else if (controller.down.isPressed()) {" line49="                this.pady = 1" line50="            } else {" line51="                this.pady = 0" line52="            }" line53="" line54="            const dir = `${this.padx},${this.pady}`" line55="            this.face = this.navData.find(data =&gt; data.dir == dir)" line56="" line57="            this.sprite.setImage(this.face.image)" line58="        }" line59="" line60="        if (controller.B.isPressed()) {" line61="            this.fly = this.face" line62="            this.sprite.vx = this.fly.vx" line63="            this.sprite.vy = this.fly.vy" line64="            this.sprite.fx = Math.abs(this.fly.vx)" line65="            this.sprite.fy = Math.abs(this.fly.vy)" line66="        }" line67="    }" line68="}" numlines="69"></mutation><next><block type="typescript_statement" id="2xy[.*X#b)L69IK}al3V" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Asteroid {" line1="    constructor(public sprite: Sprite, v: number) {" line2="        sprite.x = Math.randomRange(0, scene.screenWidth())" line3="        sprite.y = Math.randomRange(0, scene.screenHeight())" line4="        " line5="        sprite.setStayInScreen(true)" line6="        sprite.setBounceOnWall(true)" line7="" line8="        const a = Math.PI * 2 * Math.random()" line9="        sprite.vx = Math.sin(a) * v" line10="        sprite.vy = Math.cos(a) * v" line11="    }" line12="}" numlines="13"></mutation><next><block type="typescript_statement" id="V5T5;3lC4WZ~;ou*^scK" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const me = new Ship(sprites.create(assets.image`ship0`, SpriteKind.Player))" numlines="1" declaredvars="me"></mutation><next><block type="typescript_statement" id="b`q8,PLlmL:f;)*lOWg-" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="me.generateNavData(75, [assets.image`ship0`, assets.image`ship1`, assets.image`ship2`, assets.image`ship3`, assets.image`ship4`, assets.image`ship5`, assets.image`ship6`, assets.image`ship7`])" numlines="1"></mutation><next><block type="controls_repeat_ext" id="9Ga+[sc~Q|ySFer}gr?_"><value name="TIMES"><shadow type="math_whole_number" id="%k`zF^fYktH(/(g%f!f_"><field name="NUM">10</field></shadow></value><statement name="DO"><block type="array_push" id="QNWBTKUa:vvt6U.9h7JH"><value name="list"><block type="variables_get" id="Vw,g`50:Ia@R.f8cRog4"><field name="VAR" id="2RTUbA0648V~wCsYq}HR">asteroids</field></block></value><value name="value"><block type="typescript_expression" id="FZ[E^V)2L*GewEuo@w;b" editable="false"><field name="EXPRESSION">new Asteroid(sprites.create(assets.image`asteroid0`, SpriteKind.Enemy), 30)</field></block></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>